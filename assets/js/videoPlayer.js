(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=t.querySelector("i"),d=document.getElementById("mute"),l=d.querySelector("i"),o=(document.getElementById("time"),document.getElementById("volume")),a=document.getElementById("currentTime"),s=document.getElementById("totalTime"),u=document.getElementById("timeline"),m=document.getElementById("fullScreen"),i=m.querySelector("i"),c=document.getElementById("videoContainer"),r=document.getElementById("videoControls");let v=null,E=null,f=.5;e.volume=f;const g=e=>new Date(1e3*e).toISOString().substr(14,5),y=()=>r.classList.remove("showing");console.log(c.dataset),t.addEventListener("click",(t=>{e.paused?e.play():e.pause(),n.classList=e.paused?"fas fa-play":"fas fa-pause"})),d.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,l.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",o.value=e.muted?0:f})),o.addEventListener("input",(t=>{const{value:n}=t.target;e.muted&&(e.muted=!1,l.classList="fas fa-volume-up"),e.volume=n,f=n,console.log(n)})),e.addEventListener("loadedmetadata",(()=>{s.innerText=g(Math.floor(e.duration)),u.max=Math.floor(e.duration)})),e.addEventListener("timeupdate",(()=>{a.innerText=g(Math.floor(e.currentTime)),u.value=Math.floor(e.currentTime)})),e.addEventListener("ended",(()=>{console.log("Video Ended");const{id:e}=c.dataset;fetch(`/api/videos/${e}/view`,{method:"POST"})})),u.addEventListener("input",(t=>{const{value:n}=t.target;e.currentTime=n})),m.addEventListener("click",(()=>{null===document.fullscreenElement?(c.requestFullscreen(),i.classList="fas fa-compress"):(document.exitFullscreen(),i.classList="fas fa-expand")})),e.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),E&&(clearTimeout(E),E=null),r.classList.add("showing"),E=setTimeout(y,3e3)})),e.addEventListener("mouseleave",(()=>{v=setTimeout(y,3e3)}))})();