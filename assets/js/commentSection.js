(()=>{const e=document.getElementById("videoContainer"),t=document.getElementById("commentForm"),n=document.querySelectorAll("#deleteCommentBtn");t&&t.addEventListener("submit",(async n=>{n.preventDefault();const a=t.querySelector("textarea"),c=a.value,d=e.dataset.id;if(""===c)return;const s=await fetch(`/api/videos/${d}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})});if(201===s.status){a.value="";const{newCommentId:e}=await s.json();((e,t)=>{const n=document.querySelector(".video__comments ul"),a=document.createElement("li");a.dataset.id=t,a.className="video__comment";const c=document.createElement("i");c.className="fas fa-comment";const d=document.createElement("span");d.innerText=` ${e}`;const s=document.createElement("span");s.innerText="❌",s.dataset.id=t,s.id="deleteCommentBtn",a.appendChild(c),a.appendChild(d),a.appendChild(s),n.prepend(a);const m=document.getElementById("deleteCommentBtn");m&&m.addEventListener("click",o)})(c,e)}}));const o=async e=>{const t=e.target.dataset.id;console.log("click X",t);const n=await fetch(`/api/comments/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});console.log(n.status),201===n.status&&(console.log("DB Delete Succeed!!!"),e.target.parentNode.remove())};n&&n.forEach((e=>{e.addEventListener("click",o),console.log(e.dataset.id)}))})();